{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/comunicacion/comunicacion.service\";\nimport * as i2 from \"src/app/services/incidencias/incidencia.service\";\nimport * as i3 from \"ngx-spinner\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nfunction IncidenciasComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 21);\n    i0.ɵɵlistener(\"click\", function IncidenciasComponent_tr_35_Template_tr_click_0_listener() {\n      const incidencia_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.seleccionarIncidencia(incidencia_r2));\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 22);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const incidencia_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(incidencia_r2.topico);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 3, incidencia_r2.fecha, \"dd-MM-yyyy HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(incidencia_r2.descripcion);\n  }\n}\nexport let IncidenciasComponent = /*#__PURE__*/(() => {\n  class IncidenciasComponent {\n    comunicacionServicio;\n    incideciaServicio;\n    spinnerService;\n    restriccion;\n    incidencias;\n    cantidadIncidencias = 20;\n    constructor(comunicacionServicio, incideciaServicio, spinnerService) {\n      this.comunicacionServicio = comunicacionServicio;\n      this.incideciaServicio = incideciaServicio;\n      this.spinnerService = spinnerService;\n    }\n    ngOnInit() {\n      this.getRestriccion();\n      if (this.restriccion != null) {\n        this.getIncidenciasPorRestriccion(this.restriccion.restriccion.idRestriccion);\n      }\n    }\n    getRestriccion() {\n      this.restriccion = this.comunicacionServicio.restriccionDTO;\n      if (this.restriccion != null) {\n        document.getElementById(\"restriccionSeleccionada\").innerHTML = \"\" + this.restriccion.victimario.apellido + \", \" + this.restriccion.victimario.nombre + \" - \" + this.restriccion.damnificada.apellido + \", \" + this.restriccion.damnificada.nombre;\n      }\n    }\n    getIncidenciasPorRestriccion(idRestriccion) {\n      this.spinnerService.show();\n      this.incideciaServicio.getIncidenciasPorRestriccion(idRestriccion, this.cantidadIncidencias).subscribe(res => {\n        this.incidencias = res;\n        for (var i = 0; i < this.incidencias.length; i++) {\n          if (this.incidencias[i].topico == \"VictimarioIlocalizable\") {\n            this.incidencias[i].topico = \"Victimario ilocalizable\";\n          }\n          if (this.incidencias[i].topico == \"DamnificadaIlocalizable\") {\n            this.incidencias[i].topico = \"Damnificada ilocalizable\";\n          }\n          if (this.incidencias[i].topico == \"PruebaDeVidaFallida\") {\n            this.incidencias[i].topico = \"Prueba de vida fallida\";\n          }\n          if (this.incidencias[i].topico == \"InfraccionDeRestriccion\") {\n            this.incidencias[i].topico = \"Infraccion de restriccion\";\n          }\n          if (this.incidencias[i].topico == \"FueraDeRutina\") {\n            this.incidencias[i].topico = \"Fuera de rutina\";\n          }\n        }\n        ;\n        this.spinnerService.hide();\n      });\n    }\n    getIncidenciasPorTopico(topico) {\n      this.incideciaServicio.getIncidenciasPorTopico(topico, this.cantidadIncidencias).subscribe(res => {\n        this.incidencias = res;\n      });\n    }\n    seleccionarIncidencia(incidencia) {\n      document.getElementById(\"topico\").innerHTML = \" \" + incidencia.topico;\n      document.getElementById(\"exampleTextarea\").innerHTML = \" \" + incidencia.descripcion;\n    }\n    cargarMas() {\n      this.cantidadIncidencias += 20;\n      this.getIncidenciasPorRestriccion(this.restriccion.restriccion.idRestriccion);\n    }\n    cambioTexto() {}\n    static ɵfac = function IncidenciasComponent_Factory(t) {\n      return new (t || IncidenciasComponent)(i0.ɵɵdirectiveInject(i1.ComunicacionService), i0.ɵɵdirectiveInject(i2.IncidenciaService), i0.ɵɵdirectiveInject(i3.NgxSpinnerService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: IncidenciasComponent,\n      selectors: [[\"app-incidencias\"]],\n      decls: 39,\n      vars: 2,\n      consts: [[1, \"container\"], [\"type\", \"ball-clip-rotate\", \"size\", \"medium\", \"bdColor\", \"rgba(51,51,51,0.3)\", \"color\", \"#26294D\"], [2, \"font-size\", \"15px\", \"font-weight\", \"bold\", \"color\", \"#26294D\"], [1, \"row\"], [1, \"col\"], [1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-light\"], [1, \"navbar-brand\"], [\"id\", \"restriccionSeleccionada\"], [\"id\", \"navbarColor03\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"mr-auto\"], [1, \"form-inline\", \"my-2\", \"my-lg-0\"], [\"name\", \"tipoIncidencia\", \"ngbTooltip\", \"Tipo de Incidencia\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"type\", \"button\", \"disabled\", \"true\", 1, \"btn\", \"btn-secondary\", \"my-2\", \"my-sm-0\", 3, \"click\"], [1, \"table\", \"table-striped\"], [\"scope\", \"col\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-center\"], [1, \"cargarMas\", 3, \"click\"], [3, \"click\"], [1, \"joinedDate\"]],\n      template: function IncidenciasComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"ngx-spinner\", 1)(2, \"p\", 2);\n          i0.ɵɵtext(3, \"Cargando...\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"nav\", 5)(7, \"a\", 6);\n          i0.ɵɵtext(8, \"Restricci\\u00F3n: \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(9, \"a\", 7);\n          i0.ɵɵelementStart(10, \"div\", 8);\n          i0.ɵɵelement(11, \"ul\", 9);\n          i0.ɵɵelementStart(12, \"form\", 10)(13, \"select\", 11);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function IncidenciasComponent_Template_select_ngModelChange_13_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.incidencias, $event) || (ctx.incidencias = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(14, \"option\", 12);\n          i0.ɵɵtext(15, \"Todas\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"option\", 13);\n          i0.ɵɵtext(17, \"Infracciones\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"option\", 14);\n          i0.ɵɵtext(19, \"Pruebas de vida\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function IncidenciasComponent_Template_button_click_20_listener() {\n            return ctx.cambioTexto();\n          });\n          i0.ɵɵtext(21, \"Search\");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelement(22, \"br\");\n          i0.ɵɵelementStart(23, \"div\", 3)(24, \"div\")(25, \"table\", 16)(26, \"thead\")(27, \"tr\")(28, \"th\", 17);\n          i0.ɵɵtext(29, \"Tipo de incidencia\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"th\", 17);\n          i0.ɵɵtext(31, \"Fecha y Hora\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"th\", 17);\n          i0.ɵɵtext(33, \"Datos generales\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(34, \"tbody\");\n          i0.ɵɵtemplate(35, IncidenciasComponent_tr_35_Template, 8, 6, \"tr\", 18);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(36, \"div\", 19)(37, \"a\", 20);\n          i0.ɵɵlistener(\"click\", function IncidenciasComponent_Template_a_click_37_listener() {\n            return ctx.cargarMas();\n          });\n          i0.ɵɵtext(38, \"Cargar m\\u00E1s ...\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(13);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.incidencias);\n          i0.ɵɵadvance(22);\n          i0.ɵɵproperty(\"ngForOf\", ctx.incidencias);\n        }\n      },\n      dependencies: [i4.NgForOf, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm, i6.NgbTooltip, i3.NgxSpinnerComponent, i4.DatePipe],\n      styles: [\".container[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]{color:#053667}.row[_ngcontent-%COMP%]{margin-top:10px}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:azure;cursor:pointer}.table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{opacity:.3}\"]\n    });\n  }\n  return IncidenciasComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}