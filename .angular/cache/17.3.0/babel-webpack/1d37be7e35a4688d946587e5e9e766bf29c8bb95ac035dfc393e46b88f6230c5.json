{"ast":null,"code":"/**\n * CIE LUV (C'est la vie)\n *\n * @module color-space/luv\n */\nimport xyz from './xyz.js';\nexport default {\n  name: 'luv',\n  //NOTE: luv has no rigidly defined limits\n  //easyrgb fails to get proper coords\n  //boronine states no rigid limits\n  //colorMine refers this ones:\n  min: [0, -134, -140],\n  max: [100, 224, 122],\n  channel: ['lightness', 'u', 'v'],\n  alias: ['LUV', 'cieluv', 'cie1976'],\n  xyz: function (arg, i, o) {\n    var _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n    l = arg[0], u = arg[1], v = arg[2];\n    if (l === 0) return [0, 0, 0];\n\n    //get constants\n    //var e = 0.008856451679035631; //(6/29)^3\n    var k = 0.0011070564598794539; //(3/29)^3\n\n    //get illuminant/observer\n    i = i || 'D65';\n    o = o || 2;\n    xn = xyz.whitepoint[o][i][0];\n    yn = xyz.whitepoint[o][i][1];\n    zn = xyz.whitepoint[o][i][2];\n    un = 4 * xn / (xn + 15 * yn + 3 * zn);\n    vn = 9 * yn / (xn + 15 * yn + 3 * zn);\n    // un = 0.19783000664283;\n    // vn = 0.46831999493879;\n\n    _u = u / (13 * l) + un || 0;\n    _v = v / (13 * l) + vn || 0;\n    y = l > 8 ? yn * Math.pow((l + 16) / 116, 3) : yn * l * k;\n\n    //wikipedia method\n    x = y * 9 * _u / (4 * _v) || 0;\n    z = y * (12 - 3 * _u - 20 * _v) / (4 * _v) || 0;\n\n    //boronine method\n    //https://github.com/boronine/husl/blob/master/husl.coffee#L201\n    // x = 0 - (9 * y * _u) / ((_u - 4) * _v - _u * _v);\n    // z = (9 * y - (15 * _v * y) - (_v * x)) / (3 * _v);\n\n    return [x, y, z];\n  }\n};\n\n// http://www.brucelindbloom.com/index.html?Equations.html\n// https://github.com/boronine/husl/blob/master/husl.coffee\n//i - illuminant\n//o - observer\nxyz.luv = function (arg, i, o) {\n  var _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\n  //get constants\n  var e = 0.008856451679035631; //(6/29)^3\n  var k = 903.2962962962961; //(29/3)^3\n\n  //get illuminant/observer coords\n  i = i || 'D65';\n  o = o || 2;\n  xn = xyz.whitepoint[o][i][0];\n  yn = xyz.whitepoint[o][i][1];\n  zn = xyz.whitepoint[o][i][2];\n  un = 4 * xn / (xn + 15 * yn + 3 * zn);\n  vn = 9 * yn / (xn + 15 * yn + 3 * zn);\n  x = arg[0], y = arg[1], z = arg[2];\n  _u = 4 * x / (x + 15 * y + 3 * z) || 0;\n  _v = 9 * y / (x + 15 * y + 3 * z) || 0;\n  var yr = y / yn;\n  l = yr <= e ? k * yr : 116 * Math.pow(yr, 1 / 3) - 16;\n  u = 13 * l * (_u - un);\n  v = 13 * l * (_v - vn);\n  return [l, u, v];\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}