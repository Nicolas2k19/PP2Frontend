{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-toastr\";\nimport * as i2 from \"src/app/services/notificaciones/notificacion.service\";\nimport * as i3 from \"src/app/services/comunicacion/comunicacion.service\";\nimport * as i4 from \"src/app/services/login/usuario.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/forms\";\nexport let NavComponent = /*#__PURE__*/(() => {\n  class NavComponent {\n    constructor(toastr, notificacionService, comunicacionService, usuarioService) {\n      this.toastr = toastr;\n      this.notificacionService = notificacionService;\n      this.comunicacionService = comunicacionService;\n      this.usuarioService = usuarioService;\n      this.cantNotificaciones = 0;\n      this.notificacionesNoLeidas = \"\";\n      this.rolDeUsuario = \"\";\n      this.usuarioLogeado = \"\";\n    }\n    ngOnInit() {\n      console.log(\" ROL DEL QUE INICIO ES : \" + this.comunicacionService.administrativo.rolDeUsuario);\n      this.rolDeUsuario = this.comunicacionService.administrativo.rolDeUsuario;\n      this.usuarioLogeado = localStorage.getItem('emailUsuario');\n      /*\n      clearInterval(this.intervalo);\n      let thisjr = this;\n      this.intervalo = setInterval(function () {\n        thisjr.controlarNotificaciones(thisjr);\n      }, 6000);\n      */\n    }\n    controlarNotificaciones(thisjr) {\n      //BUSCO LA CANTIDAD DE NOTIFICACIONES NO VISTAS\n      thisjr.notificacionService.getCantNotificacionesNoVistas(localStorage.getItem(\"emailUsuario\")).subscribe(res => {\n        var cantNoVistas = res;\n        //SI TENGO MAS NO VISTAS, MUESTRO TOASTR\n        if (cantNoVistas > thisjr.cantNotificaciones) {\n          thisjr.toastr.info(\"NUEVAS NOTIFICACIONES\");\n        }\n        //SI LA CANTIDAD QUE OBTUVE DE NO VISTAS ES DISTINTA A LA ACTUAL, LO ACTUALIZO\n        if (cantNoVistas != thisjr.cantNotificaciones) {\n          thisjr.cantNotificaciones = cantNoVistas;\n          thisjr.notificacionesNoLeidas = cantNoVistas;\n        }\n        //SI LA CANTIDAD ES >100, MUESTRO MSJ +99\n        if (cantNoVistas > 100) {\n          thisjr.notificacionesNoLeidas = \"+99\";\n        }\n      });\n    }\n    salir() {\n      localStorage.setItem(\"emailUsuario\", \"\");\n    }\n    static #_ = this.ɵfac = function NavComponent_Factory(t) {\n      return new (t || NavComponent)(i0.ɵɵdirectiveInject(i1.ToastrService), i0.ɵɵdirectiveInject(i2.NotificacionService), i0.ɵɵdirectiveInject(i3.ComunicacionService), i0.ɵɵdirectiveInject(i4.UsuarioService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: NavComponent,\n      selectors: [[\"app-nav\"]],\n      decls: 42,\n      vars: 11,\n      consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-dark\", \"bg-primary\"], [\"src\", \"https://image.flaticon.com/icons/svg/1499/1499591.svg\", 1, \"img\"], [\"id\", \"navbarColor01\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"mr-auto\"], [1, \"nav-item\"], [\"routerLink\", \"restricciones\", 1, \"nav-link\", 3, \"hidden\"], [1, \"sr-only\"], [\"routerLink\", \"notificaciones\", 1, \"nav-link\", 3, \"hidden\"], [1, \"badge\", \"badge-pill\", \"badge-danger\", \"badge-notif\", 3, \"ngModelChange\", \"ngModel\", \"hidden\"], [\"routerLink\", \"incidencias\", 1, \"nav-link\", 3, \"hidden\"], [\"routerLink\", \"pruebasDeVida\", 1, \"nav-link\", 3, \"hidden\"], [\"routerLink\", \"rutinas\", 1, \"nav-link\", 3, \"hidden\"], [1, \"nav-item\", \"dropdown\"], [\"data-toggle\", \"dropdown\", \"href\", \"#\", \"role\", \"button\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\", 3, \"hidden\"], [\"x-placement\", \"bottom-start\", 1, \"dropdown-menu\", 2, \"position\", \"absolute\", \"will-change\", \"transform\", \"top\", \"0px\", \"left\", \"0px\", \"transform\", \"translate3d(0px, 38px, 0px)\"], [\"routerLink\", \"administrarUsuarios\", 1, \"dropdown-item\"], [\"routerLink\", \"administrarPersonas\", 1, \"dropdown-item\"], [\"routerLink\", \"administrarRestricciones\", 1, \"dropdown-item\"], [1, \"form-inline\", \"my-2\", \"my-lg-0\"], [\"data-toggle\", \"dropdown\", \"href\", \"#\", \"role\", \"button\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [\"routerLink\", \"recuperarContrasena\", 1, \"dropdown-item\"], [\"routerLink\", \"../ingresar\", 1, \"dropdown-item\", 3, \"click\"]],\n      template: function NavComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"nav\", 0);\n          i0.ɵɵelement(1, \"img\", 1);\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"ul\", 3)(4, \"li\", 4)(5, \"a\", 5);\n          i0.ɵɵtext(6, \"Restricciones perimetrales \");\n          i0.ɵɵelementStart(7, \"span\", 6);\n          i0.ɵɵtext(8, \"(current)\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(9, \"li\", 4)(10, \"a\", 7);\n          i0.ɵɵtext(11, \"Notificaciones \");\n          i0.ɵɵelementStart(12, \"span\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function NavComponent_Template_span_ngModelChange_12_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.notificacionesNoLeidas, $event) || (ctx.notificacionesNoLeidas = $event);\n            return $event;\n          });\n          i0.ɵɵtext(13);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(14, \"li\", 4)(15, \"a\", 9);\n          i0.ɵɵtext(16, \"Incidencias\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"li\", 4)(18, \"a\", 10);\n          i0.ɵɵtext(19, \"Pruebas de vida\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"li\", 4)(21, \"a\", 11);\n          i0.ɵɵtext(22, \"Rutina\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(23, \"li\", 12)(24, \"a\", 13);\n          i0.ɵɵtext(25, \"Administrar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"div\", 14)(27, \"a\", 15);\n          i0.ɵɵtext(28, \"Usuarios\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"a\", 16);\n          i0.ɵɵtext(30, \"Personas\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"a\", 17);\n          i0.ɵɵtext(32, \"Restricciones perimetrales\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(33, \"form\", 18)(34, \"a\", 12)(35, \"a\", 19);\n          i0.ɵɵtext(36);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"div\", 14)(38, \"a\", 20);\n          i0.ɵɵtext(39, \"Cambiar Contrase\\u00F1a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"a\", 21);\n          i0.ɵɵlistener(\"click\", function NavComponent_Template_a_click_40_listener() {\n            return ctx.salir();\n          });\n          i0.ɵɵtext(41, \"Salir\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"hidden\", ctx.rolDeUsuario != \"ADMINISTRATIVO\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"hidden\", ctx.rolDeUsuario != \"ADMINISTRATIVO\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.notificacionesNoLeidas);\n          i0.ɵɵproperty(\"hidden\", ctx.cantNotificaciones <= 0);\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate(ctx.notificacionesNoLeidas);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"hidden\", ctx.rolDeUsuario != \"ADMINISTRATIVO\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"hidden\", ctx.rolDeUsuario != \"ADMINISTRATIVO\")(\"hidden\", ctx.rolDeUsuario != \"ADMINISTRATIVO\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"hidden\", ctx.rolDeUsuario != \"ADMINISTRATIVO\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"hidden\", ctx.rolDeUsuario != \"SUPERVISOR\");\n          i0.ɵɵadvance(12);\n          i0.ɵɵtextInterpolate(ctx.usuarioLogeado);\n        }\n      },\n      dependencies: [i5.RouterLink, i6.ɵNgNoValidate, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.NgForm],\n      styles: [\".navbar-brand[_ngcontent-%COMP%]{color:#f0f8ff}.img[_ngcontent-%COMP%]{width:3%}.nav-link[_ngcontent-%COMP%]{color:#bfc9ca}.nav-link[_ngcontent-%COMP%]:hover{color:#1abc9c}\"]\n    });\n  }\n  return NavComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}