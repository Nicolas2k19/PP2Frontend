{"ast":null,"code":"import { PruebaDeVida } from 'src/app/models/prueba-de-vida';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/pruebaDeVida/prueba-de-vida.service\";\nimport * as i2 from \"src/app/services/comunicacion/comunicacion.service\";\nimport * as i3 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"src/app/services/fotoIdentificacion/foto-identificacion.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction PruebasDeVidaComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function PruebasDeVidaComponent_ng_template_4_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.cerrarModal());\n    });\n    i0.ɵɵelementStart(2, \"span\", 24);\n    i0.ɵɵtext(3, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(4, \"div\", 25)(5, \"div\", 5)(6, \"div\", 26)(7, \"legend\", 27);\n    i0.ɵɵtext(8, \"Foto perfil\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"img\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 26)(11, \"legend\");\n    i0.ɵɵtext(12, \"Prueba de vida\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"a\", 29);\n    i0.ɵɵtext(14, \"RESPUESTA NO RECIBIDA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"img\", 28);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"div\", 30)(17, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function PruebasDeVidaComponent_ng_template_4_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.aceptarPruebaDeVida());\n    });\n    i0.ɵɵtext(18, \"Aceptar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function PruebasDeVidaComponent_ng_template_4_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.rechazarPruebaDeVida());\n    });\n    i0.ɵɵtext(20, \"Rechazar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"src\", ctx_r2.imgPerfil, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"hidden\", ctx_r2.respondio);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.imgPruebaDeVida, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PruebasDeVidaComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"span\", 34);\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PruebasDeVidaComponent_tr_40_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 37);\n    i0.ɵɵlistener(\"click\", function PruebasDeVidaComponent_tr_40_a_9_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const prueba_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      const content_r7 = i0.ɵɵreference(5);\n      return i0.ɵɵresetView(ctx_r2.open(content_r7, prueba_r6));\n    });\n    i0.ɵɵelementStart(1, \"i\", 38);\n    i0.ɵɵtext(2, \"insert_photo \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PruebasDeVidaComponent_tr_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 35);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtemplate(9, PruebasDeVidaComponent_tr_40_a_9_Template, 3, 0, \"a\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const prueba_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 4, prueba_r6.fecha, \"dd-MM-yyyy HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(prueba_r6.descripcion);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(prueba_r6.estado);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", prueba_r6.estado == \"Pendiente\");\n  }\n}\nexport let PruebasDeVidaComponent = /*#__PURE__*/(() => {\n  class PruebasDeVidaComponent {\n    constructor(pruevaDeVidaService, comunicacion, config, modalService, spinnerService, fotoIdentificacionService) {\n      this.pruevaDeVidaService = pruevaDeVidaService;\n      this.comunicacion = comunicacion;\n      this.modalService = modalService;\n      this.spinnerService = spinnerService;\n      this.fotoIdentificacionService = fotoIdentificacionService;\n      this.pruebaDeVida = new PruebaDeVida();\n      this.spinnerBoolean = false;\n      this.respondio = true;\n      config.backdrop = 'static';\n      config.keyboard = false;\n    }\n    ngOnInit() {\n      if (this.comunicacion.restriccionDTO != null) {\n        this.restriccion = this.comunicacion.restriccionDTO;\n        this.imprimirNombrePersona();\n        this.getPruebasDeVidaPersona(this.comunicacion.restriccionDTO.victimario.idPersona);\n        this.spinnerService.show();\n        this.fotoIdentificacionService.getFotoPefil(this.comunicacion.restriccionDTO.victimario.idPersona).subscribe(res => {\n          this.spinnerService.hide();\n          var foto = res;\n          this.imgPerfil = foto.foto;\n          console.log(res);\n        });\n      }\n    }\n    enviarPruebaDeVida(pruebaDeVidaForm) {\n      this.pruebaDeVida.idRestriccion = this.comunicacion.restriccionDTO.restriccion.idRestriccion;\n      this.pruebaDeVida.idPersonaRestriccion = this.comunicacion.restriccionDTO.victimario.idPersona;\n      this.pruebaDeVida.estado = \"Pendiente\";\n      this.spinnerService.show();\n      this.pruevaDeVidaService.postPruebaDeVida(this.pruebaDeVida).subscribe(res => {\n        this.spinnerService.hide();\n        console.log(res);\n        pruebaDeVidaForm.reset();\n        this.pruebaDeVida = new PruebaDeVida();\n        this.getPruebasDeVidaPersona(this.comunicacion.restriccionDTO.victimario.idPersona);\n      });\n    }\n    getPruebasDeVidaPersona(idPersona) {\n      this.spinnerService.show();\n      this.pruevaDeVidaService.getPruevasDeVidaPersona(idPersona).subscribe(res => {\n        this.spinnerService.hide();\n        this.pruebasDeVida = res;\n        console.log(res);\n      });\n    }\n    aceptarPruebaDeVida() {\n      this.spinnerService.show();\n      this.pruebaDeVida.estado = \"Aceptada\";\n      this.pruevaDeVidaService.putPruebaDeVida(this.pruebaDeVida).subscribe(res => {\n        console.log(res);\n        this.pruebaDeVida = new PruebaDeVida();\n        this.getPruebasDeVidaPersona(this.comunicacion.restriccionDTO.victimario.idPersona);\n        this.modalService.dismissAll();\n        this.spinnerService.hide();\n      });\n    }\n    rechazarPruebaDeVida() {\n      this.spinnerService.show();\n      this.pruebaDeVida.estado = \"Rechazada\";\n      this.pruevaDeVidaService.putPruebaDeVida(this.pruebaDeVida).subscribe(res => {\n        console.log(res);\n        this.pruebaDeVida = new PruebaDeVida();\n        this.getPruebasDeVidaPersona(this.comunicacion.restriccionDTO.victimario.idPersona);\n        this.modalService.dismissAll();\n        this.spinnerService.hide();\n      });\n    }\n    open(content, prueba) {\n      this.pruebaDeVida = prueba;\n      this.imgPruebaDeVida = \"\";\n      this.respondio = true;\n      this.getRespuestaPruebaDeVida();\n      this.modalService.open(content, {\n        size: 'xl'\n      });\n    }\n    getRespuestaPruebaDeVida() {\n      this.spinnerService.show();\n      this.pruevaDeVidaService.getFotoPruebaDeVida(this.pruebaDeVida.idPruebaDeVida).subscribe(res => {\n        this.spinnerService.hide();\n        var foto = res;\n        if (foto == null) {\n          this.respondio = false;\n        } else {\n          this.imgPruebaDeVida = foto.foto;\n          console.log(res);\n        }\n      });\n    }\n    imprimirNombrePersona() {\n      if (this.restriccion != null) {\n        document.getElementById(\"restriccionSeleccionada\").innerHTML = \"\" + this.restriccion.victimario.apellido + \", \" + this.restriccion.victimario.nombre;\n      }\n    }\n    cerrarModal() {\n      this.pruebaDeVida = new PruebaDeVida();\n      this.modalService.dismissAll();\n    }\n    static #_ = this.ɵfac = function PruebasDeVidaComponent_Factory(t) {\n      return new (t || PruebasDeVidaComponent)(i0.ɵɵdirectiveInject(i1.PruebaDeVidaService), i0.ɵɵdirectiveInject(i2.ComunicacionService), i0.ɵɵdirectiveInject(i3.NgbModalConfig), i0.ɵɵdirectiveInject(i3.NgbModal), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.FotoIdentificacionService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PruebasDeVidaComponent,\n      selectors: [[\"app-pruebas-de-vida\"]],\n      decls: 41,\n      vars: 4,\n      consts: [[\"content\", \"\"], [\"pruebaDeVidaForm\", \"ngForm\"], [1, \"container\"], [\"type\", \"ball-clip-rotate\", \"size\", \"medium\", \"bdColor\", \"rgba(51,51,51,0.3)\", \"color\", \"#26294D\"], [2, \"font-size\", \"15px\", \"font-weight\", \"bold\", \"color\", \"#26294D\"], [1, \"row\"], [1, \"col\"], [1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-light\"], [1, \"navbar-brand\"], [\"id\", \"restriccionSeleccionada\"], [1, \"card\", \"bg-light\", \"mb-3\", 2, \"max-width\", \"20rem\"], [\"text-center\", \"\", 1, \"card-body\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"type\", \"text\", \"placeholder\", \"Descripci\\u00F3n\", \"name\", \"descripcion\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"btn-block\", 3, \"disabled\"], [1, \"col-8\"], [1, \"text-center\"], [\"class\", \"spinner-grow\", \"role\", \"status\", 4, \"ngIf\"], [1, \"table\", \"table-striped\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"modal-header\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [1, \"col-6\"], [\"text-center\", \"\"], [\"alt\", \"\", 3, \"src\"], [3, \"hidden\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"role\", \"status\", 1, \"spinner-grow\"], [1, \"sr-only\"], [1, \"joinedDate\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"], [1, \"material-icons\"]],\n      template: function PruebasDeVidaComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 2)(1, \"ngx-spinner\", 3)(2, \"p\", 4);\n          i0.ɵɵtext(3, \"Cargando...\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(4, PruebasDeVidaComponent_ng_template_4_Template, 21, 3, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"nav\", 7);\n          i0.ɵɵelement(9, \"a\", 8)(10, \"a\", 9);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(11, \"br\");\n          i0.ɵɵelementStart(12, \"div\", 5)(13, \"div\", 6)(14, \"div\", 10)(15, \"div\", 11)(16, \"legend\");\n          i0.ɵɵtext(17, \"Generar prueba de vida\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"form\", 12, 1);\n          i0.ɵɵlistener(\"ngSubmit\", function PruebasDeVidaComponent_Template_form_ngSubmit_18_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const pruebaDeVidaForm_r4 = i0.ɵɵreference(19);\n            return i0.ɵɵresetView(ctx.enviarPruebaDeVida(pruebaDeVidaForm_r4));\n          });\n          i0.ɵɵelementStart(20, \"div\", 13)(21, \"input\", 14);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function PruebasDeVidaComponent_Template_input_ngModelChange_21_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.pruebaDeVida.descripcion, $event) || (ctx.pruebaDeVida.descripcion = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 13)(23, \"button\", 15);\n          i0.ɵɵtext(24, \"Enviar\");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(25, \"div\", 16)(26, \"div\", 17);\n          i0.ɵɵtemplate(27, PruebasDeVidaComponent_div_27_Template, 3, 0, \"div\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"table\", 19)(29, \"thead\")(30, \"tr\")(31, \"th\", 20);\n          i0.ɵɵtext(32, \"Fecha\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"th\", 20);\n          i0.ɵɵtext(34, \"Descripci\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"th\", 20);\n          i0.ɵɵtext(36, \"Estado\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"th\", 20);\n          i0.ɵɵtext(38, \"Ver\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(39, \"tbody\");\n          i0.ɵɵtemplate(40, PruebasDeVidaComponent_tr_40_Template, 10, 7, \"tr\", 21);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          const pruebaDeVidaForm_r4 = i0.ɵɵreference(19);\n          i0.ɵɵadvance(21);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.pruebaDeVida.descripcion);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", !pruebaDeVidaForm_r4.valid);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.spinnerBoolean);\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngForOf\", ctx.pruebasDeVida);\n        }\n      },\n      dependencies: [i6.NgForOf, i6.NgIf, i7.ɵNgNoValidate, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.RequiredValidator, i7.NgModel, i7.NgForm, i4.NgxSpinnerComponent, i6.DatePipe],\n      styles: [\".container[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]{color:#053667}.card[_ngcontent-%COMP%]{text-align:center}.row[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-top:10px}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:azure;cursor:pointer}.table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{opacity:.3}.modal-body[_ngcontent-%COMP%]{text-align:center}.modal-footer[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:100%}.spinner-grow[_ngcontent-%COMP%]{position:fixed;margin-top:20%;z-index:9999}\"]\n    });\n  }\n  return PruebasDeVidaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}